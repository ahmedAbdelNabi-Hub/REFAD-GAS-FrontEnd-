<div class="px-4">
    @if (isLoading()) {
    <div class="flex justify-center items-center mt-4 py-20">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#00853e]"></div>
    </div>
    } @else {
    <div class="flex flex-col gap-4">
        <div class="flex items-center justify-between mb-9 mt-8 px-2">
            <div class="flex items-center gap-4">
                <div>
                    <h1 class="text-2xl font-bold">{{ fuelRequest()?.companyNameArabic }}</h1>
                    <p class="text-sm text-gray-500">رقم اللوحة: {{ fuelRequest()?.carPlateNumber }}</p>
                </div>
                <span class="block text-xs font-medium text-gray-800">
                    <div class="flex items-center gap-3">
                        <a target="_blank"
                            [href]="'https://www.google.com/maps?q=' + fuelRequest()?.stationLocationLat + ',' + fuelRequest()?.stationLocationLng"
                            class="bg-[#00853e] text-white cursor-pointer px-3 py-1.5 rounded-md flex items-center gap-2 transition-colors font-medium text-xs hover:bg-[#007036]">
                            <i class='bx bx-map font-thin text-xl text-[#ffffff] cursor-pointer '
                                title="عرض على الخريطة">
                            </i> <span> عرض على الخريطة </span>
                        </a>
                    </div>
                </span>
            </div>
        </div>

        <!-- Desktop Grid Layout -->
        <div class="hidden md:grid md:grid-cols-6 gap-5 px-2 py-6">
            <!-- Driver Image -->
            <div class="col-span-1 flex flex-col items-center">
                <img [src]="getImageUrl(fuelRequest()?.driverImageUrl!)" [alt]="fuelRequest()?.driverName"
                    class="w-32 h-32 rounded-full object-cover border-2 border-gray-200 shadow-sm">
                <p class="mt-2 text-sm font-medium text-gray-700">{{ fuelRequest()?.driverName }}</p>
            </div>

            <!-- Left Column 1 - Labels -->
            <div class="flex font-semibold text-[#4b515d] text-xs col-span-1 flex-col gap-3 md:gap-6">
                <span class="text-right">اسم الشركة</span>
                <span class="text-right">رقم اللوحة</span>
                <span class="text-right">نوع السيارة</span>
                <span class="text-right">نوع الوقود</span>
                <span class="text-right">اسم السائق</span>
                <span class="text-right">جوال السائق</span>
                <span class="text-right">اسم المحطة</span>
            </div>

            <!-- Left Column 2 - Values -->
            <div class="flex col-span-1 flex-col gap-3 md:gap-6 text-gray-900 font-semibold text-xs">
                <span class="text-right">{{ fuelRequest()?.companyNameArabic || '-' }}</span>
                <span class="text-right">{{ fuelRequest()?.carPlateNumber || '-' }}</span>
                <span class="text-right">{{ fuelRequest()?.carType || '-' }}</span>
                <span class="text-right">{{ fuelRequest()?.fuelType || '-' }}</span>
                <span class="text-right">{{ fuelRequest()?.driverName || '-' }}</span>
                <span class="text-right" dir="ltr">{{ fuelRequest()?.driverMobile || '-' }}</span>
                <span class="text-right">{{ fuelRequest()?.stationNameAr || '-' }}</span>
            </div>

            <!-- Right Column 1 - Labels -->
            <div class="flex font-semibold text-[#4b515d] text-xs col-span-1 flex-col gap-3 md:gap-6">
                <span class="text-right">الكمية (لتر)</span>
                <span class="text-right">المبلغ (ر.س)</span>
                <span class="text-right">الحالة</span>
                <span class="text-right">تاريخ الطلب</span>
                <span class="text-right">تاريخ التحديث</span>
                <span class="text-right">صورة المضخة (قبل)</span>
                <span class="text-right">صورة المضخة (بعد)</span>
            </div>

            <!-- Right Column 2 - Values -->
            <div class="flex col-span-1 flex-col gap-3 md:gap-6 text-gray-900 font-semibold text-xs">
                <span class="text-right">{{ fuelRequest()?.qty || 0 }} لتر</span>
                <span class="text-right">{{ fuelRequest()?.amount?.toFixed(2) || '0.00' }} ر.س</span>
                <span
                    class="text-right py-1 px-2 inline-flex max-w-[100px] items-center gap-x-1 text-xs font-medium rounded-full {{ getStatusClass(fuelRequest()?.status!) }}">
                    {{ getStatusLabel(fuelRequest()?.status!) }}
                </span>
                <span class="text-right">{{ fuelRequest()?.requestDateTime | date: 'dd/MM/yyyy - hh:mm a' }}</span>
                <span class="text-right">{{ fuelRequest()?.updateAt | date: 'dd/MM/yyyy - hh:mm a' }}</span>
                <a [href]="fuelRequest()?.pumpImageBefore!" target="_blank" class="text-[#00853e] underline text-xs">
                    عرض الصورة
                </a>
                <a [href]="fuelRequest()?.pumpImageAfter!" target="_blank" class="text-[#00853e] underline text-xs">
                    عرض الصورة
                </a>
            </div>
        </div>

        <!-- Mobile Cards -->
        <div class="md:hidden gap-3 px-2 pb-6">
            <!-- Header Card -->
            <div class="bg-white rounded-sm border border-gray-200 p-4">
                <div class="flex items-center gap-4 mb-4">
                    <img [src]=" getImageUrl(fuelRequest()?.driverImageUrl!)" [alt]="fuelRequest()?.driverName"
                        class="w-16 h-16 rounded-full object-cover border">
                    <div>
                        <h3 class="font-semibold text-gray-900">{{ fuelRequest()?.driverName }}</h3>
                        <p class="text-sm text-gray-600">{{ fuelRequest()?.carPlateNumber }}</p>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 text-xs">
                    <div class="space-y-2">

                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">الشركة</span>
                            <span class="font-semibold mx-4 text-gray-900">{{ fuelRequest()?.companyNameArabic }}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">نوع السيارة</span>
                            <span class="font-semibold text-gray-900">{{ fuelRequest()?.carType }}</span>

                        </div>

                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">نوع الوقود</span>
                            <span class="font-semibold text-gray-900">{{ fuelRequest()?.fuelType }}</span>
                        </div>


                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">المحطة</span>
                            <span class="font-semibold text-gray-900">{{ fuelRequest()?.stationNameAr }}</span>

                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">الكمية</span>
                            <span class="font-semibold text-gray-900">{{ fuelRequest()?.qty }} لتر</span>

                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-[#4b515d]">المبلغ</span>
                            <span class="font-semibold text-gray-900">{{ fuelRequest()?.amount?.toFixed(2) }} ر.س</span>
                        </div>



                    </div>
                </div>
            </div>

            <!-- Status & Dates -->
            <div class="bg-white rounded-sm border border-gray-200 p-4">
                <div class="space-y-3 text-xs">
                    <div class="flex justify-between">
                        <span class="text-[#4b515d]">الحالة</span>
                        <span
                            class="py-1 px-2 rounded-full text-xs font-medium {{ getStatusClass(fuelRequest()?.status!) }}">
                            {{ getStatusLabel(fuelRequest()?.status!) }}
                        </span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-[#4b515d]">تاريخ الطلب</span>
                        <span class="font-semibold">{{ fuelRequest()?.requestDateTime | date: 'dd/MM/yyyy hh:mm a'
                            }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-[#4b515d]">آخر تحديث</span>
                        <span class="font-semibold">{{ fuelRequest()?.updateAt | date: 'dd/MM/yyyy hh:mm a'
                            }}</span>
                    </div>
                </div>
            </div>

            <!-- Pump Images -->
            <div class="bg-white rounded-sm border border-gray-200 p-4">
                <h4 class="font-semibold text-sm mb-3">صور المضخة</h4>
                <div class="grid grid-cols-2 gap-3">
                    <a [href]="fuelRequest()?.pumpImageBefore!" target="_blank"
                        class="block text-center text-[#00853e] underline text-xs">
                        <i class='bx bx-camera text-lg'></i><br>
                        قبل التعبئة
                    </a>
                    <a [href]="fuelRequest()?.pumpImageAfter!" target="_blank"
                        class="block text-center text-[#00853e] underline text-xs">
                        <i class='bx bx-camera text-lg'></i><br>
                        بعد التعبئة
                    </a>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-3 mt-6 px-2 md:px-0 justify-end">
            <button (click)="goBack()"
                class="bg-gray-100 text-[#667085] hover:bg-gray-200 border border-gray-200 
               cursor-pointer px-4 py-2.5 rounded-md flex items-center justify-center gap-2 transition-all font-medium text-xs w-full sm:w-auto hover:shadow-md">
                <i class='bx bx-x text-lg'></i>
                <span>اغلاق</span>
            </button>

        </div>
    </div>
    }
</div>